{% extends "base.html" %}

{% block title %}Eliminar Reunión{% endblock %}

{% block content %}
<div class="fade-in-up">
  <!-- Header Section -->
  <div class="d-flex flex-column flex-lg-row justify-content-between align-items-start align-items-lg-center gap-3 mb-4">
    <div class="flex-grow-1">
      <h1 class="h3 mb-2 d-flex align-items-center gap-3">
        <div class="avatar bg-danger bg-opacity-15 rounded-3 p-2">
          <i class="bi bi-exclamation-triangle-fill text-danger fs-4"></i>
        </div>
        <div>
          <span class="fw-bold">Eliminar Reunión</span>
          <div class="text-muted small mt-1">Confirma la eliminación de la reunión</div>
        </div>
      </h1>
    </div>

    <div class="d-flex flex-wrap gap-2">
      <a href="{{ url_for('admin_reuniones') }}" class="btn btn-sm btn-outline-secondary d-flex align-items-center gap-2">
        <i class="bi bi-arrow-left"></i>
        <span class="d-none d-sm-inline">Volver</span>
      </a>
    </div>
  </div>

  <!-- Warning Alert -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-body p-4">
      <div class="alert alert-danger border-0 d-flex align-items-start gap-3" role="alert">
        <div class="avatar bg-danger rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 48px; height: 48px;">
          <i class="bi bi-exclamation-triangle fs-5"></i>
        </div>
        <div class="flex-grow-1">
          <h5 class="alert-heading mb-2">⚠️ Acción Irreversible</h5>
          <p class="mb-0">¿Estás seguro que deseas eliminar esta reunión? Esta acción no se puede deshacer y eliminará permanentemente:</p>
          <ul class="mb-0 mt-2">
            <li>La reunión y toda su configuración</li>
            <li>Todas las asignaciones de empleados</li>
            <li>El historial de asistencias</li>
            <li>Los códigos QR generados</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Meeting Details -->
  <div class="card border-0 shadow-sm mb-4">
    <div class="card-header bg-gradient-danger text-white border-0">
      <h5 class="card-title mb-0 d-flex align-items-center">
        <i class="bi bi-info-circle me-2"></i>
        Detalles de la Reunión
      </h5>
    </div>
    <div class="card-body p-4">
      <div class="row g-4">
        <!-- Título -->
        <div class="col-md-6">
          <div class="d-flex align-items-center gap-3 p-3 bg-light rounded-3">
            <div class="avatar bg-primary rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
              <i class="bi bi-tag"></i>
            </div>
            <div>
              <div class="small text-muted">Título</div>
              <div class="fw-semibold">{{ reunion.titulo }}</div>
            </div>
          </div>
        </div>

        <!-- Frecuencia -->
        <div class="col-md-6">
          <div class="d-flex align-items-center gap-3 p-3 bg-light rounded-3">
            <div class="avatar bg-success rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
              <i class="bi bi-arrow-repeat"></i>
            </div>
            <div>
              <div class="small text-muted">Frecuencia</div>
              <div class="fw-semibold">
                {% if reunion.frecuencia == 'diaria' %}
                  <span class="badge bg-primary">📅 Diaria</span>
                {% elif reunion.frecuencia == 'semanal' %}
                  <span class="badge bg-success">📆 Semanal</span>
                {% elif reunion.frecuencia == 'mensual' %}
                  <span class="badge bg-info">🗓️ Mensual</span>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Día de la semana -->
        <div class="col-md-6">
          <div class="d-flex align-items-center gap-3 p-3 bg-light rounded-3">
            <div class="avatar bg-warning rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
              <i class="bi bi-calendar-day"></i>
            </div>
            <div>
              <div class="small text-muted">Día de la Semana</div>
              <div class="fw-semibold">
                {% set dias = ['🌙 Lunes', '🔥 Martes', '⚡ Miércoles', '🚀 Jueves', '🎉 Viernes', '🌅 Sábado', '☀️ Domingo'] %}
                <span class="badge bg-warning text-dark">{{ dias[reunion.dia_semana] }}</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Hora -->
        <div class="col-md-6">
          <div class="d-flex align-items-center gap-3 p-3 bg-light rounded-3">
            <div class="avatar bg-info rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
              <i class="bi bi-clock"></i>
            </div>
            <div>
              <div class="small text-muted">Hora</div>
              <div class="fw-semibold">
                <span class="badge bg-info text-dark">
                  🕐 {{ reunion.hora.strftime('%H:%M') if reunion.hora else 'Sin hora definida' }}
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Ubicación (si existe) -->
        {% if reunion.latitud and reunion.longitud %}
        <div class="col-12">
          <div class="d-flex align-items-center gap-3 p-3 bg-light rounded-3">
            <div class="avatar bg-danger rounded-circle d-flex align-items-center justify-content-center text-white fw-bold" style="width: 40px; height: 40px;">
              <i class="bi bi-geo-alt"></i>
            </div>
            <div class="flex-grow-1">
              <div class="small text-muted">Ubicación</div>
              <div class="fw-semibold">
                <span class="badge bg-danger">
                  📍 Lat: {{ reunion.latitud }}, Lng: {{ reunion.longitud }}
                </span>
                <a href="https://www.google.com/maps/search/?api=1&query={{ reunion.latitud }},{{ reunion.longitud }}"
                   target="_blank" class="btn btn-sm btn-outline-danger ms-2">
                  <i class="bi bi-geo-alt-fill me-1"></i>Ver en mapa
                </a>
              </div>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </div>

  <!-- Action Buttons -->
  <div class="card border-0 shadow-sm">
    <div class="card-body p-4">
      <div class="d-flex flex-column flex-md-row gap-3 justify-content-center">
        <a href="{{ url_for('admin_reuniones') }}" class="btn btn-outline-secondary flex-fill d-flex align-items-center justify-content-center gap-2">
          <i class="bi bi-x-circle"></i>
          <span>Cancelar - Mantener Reunión</span>
        </a>

        <div class="vr d-none d-md-block"></div>

        <form method="POST" class="flex-fill" onsubmit="return confirmDelete()">
          <button type="submit" class="btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2">
            <i class="bi bi-trash"></i>
            <span>Sí, Eliminar Reunión</span>
          </button>
        </form>
      </div>

      <div class="text-center mt-3">
        <small class="text-muted">
          <i class="bi bi-info-circle me-1"></i>
          Esta acción no se puede deshacer
        </small>
      </div>
    </div>
  </div>
</div>

<style>
/* ===== CSS Variables for Modern Design ===== */
:root {
  --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
  --danger-gradient: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
  --info-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);

  /* Enhanced shadows */
  --shadow-soft: 0 2px 15px rgba(0, 0, 0, 0.08);
  --shadow-medium: 0 4px 25px rgba(0, 0, 0, 0.12);
  --shadow-strong: 0 8px 35px rgba(0, 0, 0, 0.15);

  /* Transitions */
  --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ===== Dark Mode Enhancements ===== */
[data-theme="dark"] {
  --primary-gradient: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
  --success-gradient: linear-gradient(135deg, #059669 0%, #10b981 100%);
  --danger-gradient: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
  --info-gradient: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);

  --shadow-soft: 0 2px 15px rgba(0, 0, 0, 0.25);
  --shadow-medium: 0 4px 25px rgba(0, 0, 0, 0.35);
  --shadow-strong: 0 8px 35px rgba(0, 0, 0, 0.45);
}

/* ===== Base Styles ===== */
.fade-in-up {
  animation: fadeInUp 0.8s ease-out;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ===== Cards ===== */
.card {
  border-radius: 16px;
  transition: var(--transition-smooth);
  backdrop-filter: blur(10px);
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-strong);
}

.bg-gradient-danger {
  background: var(--danger-gradient) !important;
}

/* ===== Buttons ===== */
.btn {
  border-radius: 10px;
  font-weight: 600;
  transition: var(--transition-smooth);
  border: none;
  position: relative;
  overflow: hidden;
}

.btn-danger {
  background: var(--danger-gradient);
  box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4);
}

.btn-outline-danger:hover {
  background: var(--danger-gradient);
  color: white;
}

.btn-outline-secondary:hover {
  background: #6c757d;
  color: white;
}

/* ===== Avatar Styles ===== */
.avatar {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border: 2px solid rgba(255, 255, 255, 0.8);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.avatar:hover {
  border-color: var(--primary-color);
  transform: scale(1.05);
}

/* ===== Alert Styles ===== */
.alert-danger {
  background: linear-gradient(135deg, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.05));
  border: 1px solid rgba(220, 53, 69, 0.2);
  border-radius: 12px;
}

/* ===== Responsive Design ===== */
@media (max-width: 768px) {
  .d-flex.flex-column.flex-md-row {
    flex-direction: column !important;
  }

  .vr {
    display: none !important;
  }

  .btn {
    width: 100%;
  }
}

@media (max-width: 576px) {
  .avatar {
    width: 32px;
    height: 32px;
  }

  .card-body {
    padding: 1.5rem 1rem;
  }
}
</style>

<script>
function confirmDelete() {
  return confirm('🚨 ¿Estás ABSOLUTAMENTE seguro?\n\nEsta acción eliminará permanentemente:\n• La reunión y toda su configuración\n• Todas las asignaciones de empleados\n• El historial de asistencias\n• Los códigos QR generados\n\n❌ Esta acción NO se puede deshacer.');
}

// Add hover effects
document.addEventListener('DOMContentLoaded', function() {
  // Enhanced card hover effects
  const cards = document.querySelectorAll('.card');
  cards.forEach(card => {
    card.addEventListener('mouseenter', function() {
      if (!this.classList.contains('hover-lift')) {
        this.style.transform = 'translateY(-4px)';
      }
    });

    card.addEventListener('mouseleave', function() {
      if (!this.classList.contains('hover-lift')) {
        this.style.transform = 'translateY(0)';
      }
    });
  });
});
</script>

{% endblock %}
